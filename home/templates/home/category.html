{% extends 'home/base.html' %}

{% block content %}
<div class="category-header {{ section }}-{{ category.slug }}">
    <h1>{{ category.name }}</h1>
    <p>{{ category.description }}</p>
    <div class="breadcrumb">
        <a href="{% url 'home' %}">Home</a> &gt;
        <a href="{% url 'section_view' section %}">{{ section|title }}</a> &gt;
        <span>{{ category.name }}</span>
    </div>
</div>

<div class="filter-container">
    <div class="total-count">
        Found {{ total_count }} animals
    </div>
</div>

{% if animals %}
    <div class="animal-grid">
        {% for animal in animals %}
            <div class="animal-card">
                <div class="animal-image">
                    {% if animal.image %}
                        <img src="{{ animal.image.url }}" alt="{{ animal.name }}">
                    {% else %}
                        <div class="placeholder-image">ü¶Å</div>
                    {% endif %}
                </div>
                <div class="animal-info">
                    <h3>{{ animal.name }}</h3>
                    <p>{{ animal.short_description|truncatewords:15 }}</p>
                    <a href="{% url 'animal_detail' animal.pk %}" class="button">Learn More</a>
                </div>
            </div>
        {% endfor %}
    </div>
    
    <!-- Pagination -->
    {% if animals.has_other_pages %}
    <div class="pagination">
        {% if animals.has_previous %}
            <a href="?page=1" class="page-link">&laquo; First</a>
            <a href="?page={{ animals.previous_page_number }}" class="page-link">&lsaquo; Previous</a>
        {% endif %}
        
        {% for num in animals.paginator.page_range %}
            {% if animals.number == num %}
                <span class="page-link active">{{ num }}</span>
            {% elif num > animals.number|add:'-3' and num < animals.number|add:'3' %}
                <a href="?page={{ num }}" class="page-link">{{ num }}</a>
            {% endif %}
        {% endfor %}
        
        {% if animals.has_next %}
            <a href="?page={{ animals.next_page_number }}" class="page-link">Next &rsaquo;</a>
            <a href="?page={{ animals.paginator.num_pages }}" class="page-link">Last &raquo;</a>
        {% endif %}
    </div>
    {% endif %}
    
{% else %}
    <div class="empty-state">
        <p>No animals found in this category.</p>
    </div>
{% endif %}
{% endblock %}